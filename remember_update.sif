@G remember-py-understanding opus 2026-01-05
N S 'remember.py - SIF-based semantic memory storage with depth validation'
N P 'Store validated understanding as SIF graphs - two modes: file-specific and theme synthesis'
N Loc 'load_passphrase(agent_id) ~line 35' -> loads SHARED_ENCLAVE_KEY for cross-agent access
N Loc 'validate_critical_theme(topic, sif) ~line 112' -> enforces quality gates on critical themes
N Loc 'store_theme(agent_id, topic, sif_content, agency) ~line 200' -> stores theme synthesis, replaces previous
N Loc 'compute_file_hash(filepath) ~line 231' -> SHA256 truncated to 12 chars for staleness
N Loc 'parse_sif_understanding(sif_text, target_path, agent_id) ~line 252' -> parses user SIF anchors to file
N Loc 'check_depth(graph) ~line 286' -> validates 4+ nodes 3+ edges node type variety WHY knowledge
N Loc 'check_loc_coverage(graph, file_path) ~line 328' -> enforces Loc nodes with ~line for Python files
N Loc 'check_operational(graph) ~line 418' -> validates gotcha assumption failure_mode presence
N Loc 'validate_comprehensiveness(graph, file_content) ~line 514' -> qwen2.5:7b LLM judge for quality
N D 'CRITICAL_THEMES dict defines quality gates - project-architecture requires 100+ nodes 16 section patterns'
N D 'Two-enclave: shared storage for file understanding so all agents compare perspectives'
N D 'Depth validation before storage - rejects shallow WHAT-only descriptions'
N G 'CRITICAL_THEMES validation is strict - missing sections or patterns blocks storage'
N G 'File hash stored in metadata - moved files orphan old understanding'
N G 'LLM validation can fail silently if Ollama not running'
N A 'SHARED_ENCLAVE_KEY env var or .env file must exist for storage'
N A 'Ollama must be running at localhost:11434 for comprehensiveness checks'
E _1 implements _2
E _3 enables _1
E _4 enforces _2
E _5 enables staleness detection
E _6 enables _7
E _8 validates _2
E _9 enforces _8
E _10 enforces _8
E _11 validates _2
E _12 configures _4
E _13 structures _1
E _14 enforces _8
E _15 warns_about _12
E _16 warns_about _5
E _17 warns_about _11
E _18 required_by _3
E _19 required_by _11
