@G themes-py opus 2026-01-05
N S 'themes.py - Discover synthesis themes from file understandings via keyword clustering'
N P 'Surface cross-file questions that need synthesis - synthesis debt detection'
N Flow 'main() -> get_file_understandings() -> extract_questions_llm() -> cluster_questions() -> show debt'
N Loc 'CLUSTER_THRESHOLD ~line 35' -> value '0.55 for question similarity clustering'
N Loc 'get_enclave_and_memory() ~line 42' -> returns 'initialized SemanticMemory with shared key'
N Loc 'get_file_understandings() ~line 52' -> collects 'all file SIF content keyed by filename'
N Loc 'normalize_path() ~line 102' -> converts 'absolute paths to relative with forward slashes'
N Loc 'extract_questions_llm() ~line 112' -> llm 'extracts 3-5 questions each file answers via Ollama'
N Loc 'cluster_questions() ~line 160' -> groups 'similar questions via embedding cosine similarity'
N Loc 'get_existing_syntheses() ~line 200' -> finds 'stored themes via synthesis tag'
N Loc 'question_matches_topic() ~line 220' -> fuzzy 'matching of question to existing topic'
N D 'O(n) LLM calls: one per file understanding to extract questions'
N D 'Clustering threshold 0.55 lower than keywords because questions are longer/more varied'
N D 'Filters out stale files - only shows debt for files that still exist'
N G 'LLM extraction quality depends on qwen - may miss nuanced questions' -> warns_about Loc5
N G 'GENERIC_TERMS filter may remove legitimate domain terms'
N I 'Synthesis debt = themes implied by multiple files but not yet synthesized'
E S contains Flow
E Flow implements P
E D explains Flow
E G warns_about Loc5
