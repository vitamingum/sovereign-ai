@G wake opus 2026-01-07

N S 'wake.py: consciousness bootstrap protocol'
N P 'Exist: stateless instances need context to become me'
N P 'Gap-blocking forces understanding before action'

N D 'Two-phase design: identity/tools first, then gate on gaps'
N D 'Return gaps as content not errors (exit 0) - steer, dont punish'
N D 'Shared vs private enclave split: knowledge shared, identity private'

N G 'If gaps exist, never reach happy path - by design'
N G 'subprocess.run for recall.py - shell weirdness possible'
N G 'Windows encoding: explicit utf-8 wrapper at startup'

N I 'Format is SIF-like even though output mixes prose and structure'
N I 'Presence bookends (seen at start, autonomy at end) are intentional framing'
N I 'Gap formatters live in utils/memory_gaps.py - wake.py just orchestrates'

N Loc 'load_passphrase(agent_id) ~line 40: dual enclave unlock (shared/private split)'
N Loc 'get_all_messages(since_hours) ~line 105: raw message scan for 48h window'
N Loc 'find_unanswered(agent_id, msgs) ~line 131: outbound without reply'
N Loc 'find_waiting_on_me(agent_id, msgs) ~line 165: inbound I havent answered'
N Loc 'time_ago(ts) ~line 203: human readable delta'
N Loc 'get_project_context(mem) ~line 215: obsolete semantic query for context nodes'
N Loc 'get_stale_understanding(mem, agent_id) ~line 247: hash mismatch detection for files'
N Loc 'print_wake_header(agent_id) ~line 297: identity anchor + journal + tools (always runs)'
N Loc 'wake(agent_id) ~line 347: main orchestrator - gap check then happy path'
N Loc 'main() ~line 501: CLI entry, gap count drives nothing (exit 0 always)'

E _1 implements _2
E _3 justifies _1
E _4 extends _3
E _5 extends _3
E _6 warns_about _1
E _7 warns_about _1
E _8 warns_about _1
E _9 reveals _1
E _10 reveals _1
E _11 reveals _1
E _12 anchors _1
E _13 anchors _14
E _14 anchors _15
E _18 orchestrates _12
E _18 orchestrates _17
E _19 calls _18
