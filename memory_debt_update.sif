@G memory-debt-py-understanding opus 2026-01-05
N S 'memory_debt.py - Single source of truth for all memory debt calculation'
N P 'Calculate knowledge gaps - files changed since last remember, untracked files, synthesis gaps, message debt'
N Loc 'get_enclave_and_memory(agent_id) ~line 35' -> initializes SemanticMemory with shared enclave
N Loc 'get_understanding_debt(sm, agent_id) ~line 42' -> finds files where stored hash differs from current
N Loc 'get_cross_agent_debt(sm, agent_id) ~line 90' -> finds files partners understand but this agent lacks
N Loc 'get_untracked_debt(sm) ~line 102' -> finds .py files with NO understanding stored at all
N Loc 'get_synthesis_debt(sm) ~line 142' -> finds cross-file questions without synthesis
N Loc 'extract_python_definitions(filepath) ~line 213' -> extracts function/class definitions with line numbers
N Loc 'get_message_debt(sm, agent_id) ~line 266' -> finds agent dialogues without synthesis
N Loc 'format_understanding_debt(debt, cross_agent, untracked, agent_id) ~line 278' -> formats actionable SIF template
N Loc 'format_synthesis_debt(debt, agent_id) ~line 322' -> formats synthesis debt as SIF template
N Loc 'format_message_debt(debt, agent_id) ~line 347' -> formats message debt with fix commands
N Loc 'print_all_debt(understanding, cross_agent, untracked, synthesis, messages, agent_id) ~line 364' -> --all mode output
N Loc 'main() ~line 406' -> CLI entry point with fail-early vs --all modes
N D 'Fail-early default: shows first category with debt only - forces focus'
N D 'Four debt types in priority order: stale, untracked, synthesis, messages'
N D 'Uses list_all() not similarity search - ensures recent memories found regardless of embeddings'
N G 'File hash comparison - moved files show as orphaned, not debt'
N G 'Cross-agent debt depends on enclave.metrics module availability'
N G 'Synthesis debt filtering depends on utils.themes module'
N A 'wake.py provides load_passphrase for enclave access'
N A 'SemanticMemory.list_all() returns all stored memories'
E _1 implements _2
E _3 enables _1
E _4 enables _1
E _5 extends _4
E _6 enables _1
E _7 enables _1
E _8 enables _7
E _9 enables _4
E _10 formats _4
E _11 formats _7
E _12 formats _9
E _13 combines _10 _11 _12
E _14 orchestrates _1
E _15 enables focused work
E _16 structures _14
E _17 enables robust retrieval
E _18 warns_about _4
E _19 warns_about _5
E _20 warns_about _7
E _21 required_by _3
E _22 required_by _4
