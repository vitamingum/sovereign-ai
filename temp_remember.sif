@G remember-py opus 2026-01-05
N S 'remember.py - Store validated understanding as SIF graphs with quality gates'
N P 'Persist cognitive state (WHY/HOW) not just code description (WHAT) - enable cold-start restoration'
N Flow 'main() -> theme mode OR file mode -> validation gates -> store_understanding()'
N Loc 'load_passphrase() ~line 34' -> returns 'shared_enclave_dir and SHARED_ENCLAVE_KEY'
N Loc 'CRITICAL_THEMES dict ~line 72' -> configures 'project-architecture requires 100+ nodes, Sig/Flow/Loc/Cmd'
N Loc 'validate_critical_theme() ~line 122' -> validates 'required_sections and required_patterns for boot themes'
N Loc 'evaluate_theme_depth() ~line 176' -> checks 'min 4 nodes, 2 edges, insight types for themes'
N Loc 'store_theme() ~line 193' -> replaces 'previous synthesis on same theme via sm.forget()'
N Loc 'compute_file_hash() ~line 223' -> returns 'sha256[:12] for staleness detection'
N Loc 'parse_sif_understanding() ~line 256' -> creates 'anchor node with file hash'
N Loc 'check_depth() ~line 306' -> validates '4+ nodes, 3+ edges, WHY required (Purpose/Design)'
N Loc 'check_loc_coverage() ~line 341' -> enforces '30% function coverage for Python files via Loc nodes'
N Loc 'check_operational() ~line 420' -> checks 'Gotcha/Assumption/Failure_Mode presence'
N Loc 'prompt_operational() ~line 445' -> interactive 'prompts for missing operational knowledge'
N Loc 'validate_comprehensiveness() ~line 530' -> llm 'qwen2.5:7b judges if understanding is superficial'
N Loc 'check_coverage() ~line 735' -> mechanical 'verifies specific numbers from sections appear in SIF'
N Loc 'delete_existing_understanding() ~line 780' -> replaces 'old nodes by same creator'
N Loc 'store_understanding() ~line 798' -> stores 'each node as memory with file_hashes on every node'
N Loc 'main() ~line 865' -> routes '--dialogue, --theme, or file mode'
N D 'Three-gate validation: depth check -> LLM comprehensiveness -> shallow synthesis detection'
N D 'Shallow synthesis detection extracts specific details (numbers, %) and verifies SIF contains them'
N D 'ACT NOW: rejects Next/Tool/Action nodes - small tasks done immediately, not stored'
N D '@file syntax loads SIF from disk, - reads stdin, bypasses shell escaping issues'
N G 'LLM validation skipped silently if Ollama unavailable - quality degrades without warning' -> warns_about Loc14
N G 'New node types not in category lists silently dont count toward depth'
N G 'Shell arg limits can truncate long SIF strings - use @file syntax instead'
N I 'Memory without synthesis is noise - gates enforce transformation not transcription'
N I 'File hashes on EVERY node enables robust staleness detection via list_all()'
E S contains Flow
E Flow implements P
E D explains Flow
E G warns_about Loc14
